<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>UPDATE</title>
<link rel="stylesheet" href="stylesheet.css" type="text/css">
<link rev="made" href="pgsql-docs@postgresql.org">
<meta name="generator" content="DocBook XSL Stylesheets V1.64.1">
<link rel="home" href="index.html" title="PostgreSQL 8.0.0beta2 Documentation">
<link rel="up" href="sql-commands.html" title="SQL Commands">
<link rel="previous" href="sql-unlisten.html" title="UNLISTEN">
<link rel="next" href="sql-vacuum.html" title="VACUUM">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry" lang="en">
<a name="sql-update"></a><div class="titlepage">
<div></div>
<div></div>
</div>
<div class="refnamediv">
<h2>Name</h2>
<p>UPDATE &#8212; update rows of a table</p>
</div>
<a name="id2697177"></a><div class="refsynopsisdiv">
<h2>Synopsis</h2>
<pre class="synopsis">UPDATE [ ONLY ] <i class="replaceable"><tt>table</tt></i> SET <i class="replaceable"><tt>column</tt></i> = { <i class="replaceable"><tt>expression</tt></i> | DEFAULT } [, ...]
    [ FROM <i class="replaceable"><tt>fromlist</tt></i> ]
    [ WHERE <i class="replaceable"><tt>condition</tt></i> ]</pre>
</div>
<div class="refsect1" lang="en">
<a name="id2697222"></a><h2>Description</h2>
<p>   <tt class="command">UPDATE</tt> changes the values of the specified
   columns in all rows that satisfy the condition. Only the columns to
   be modified need be mentioned in the <tt class="literal">SET</tt> clause;
   columns not explicitly modified retain their previous values.
  </p>
<p>   By default, <tt class="command">UPDATE</tt> will update rows in the
   specified table and all its subtables. If you wish to only update
   the specific table mentioned, you must use the <tt class="literal">ONLY</tt>
   clause.
  </p>
<p>   There are two ways to modify a table using information contained in
   other tables in the database: using sub-selects, or specifying
   additional tables in the <tt class="literal">FROM</tt> clause. Which
   technique is more appropriate depends on the specific
   circumstances.
  </p>
<p>   You must have the <tt class="literal">UPDATE</tt> privilege on the table
   to update it, as well as the <tt class="literal">SELECT</tt>
   privilege to any table whose values are read in the
   <i class="replaceable"><tt>expression</tt></i>s or
   <i class="replaceable"><tt>condition</tt></i>.
  </p>
</div>
<div class="refsect1" lang="en">
<a name="id2697301"></a><h2>Parameters</h2>
<div class="variablelist"><dl>
<dt><span class="term"><i class="replaceable"><tt>table</tt></i></span></dt>
<dd><p>      The name (optionally schema-qualified) of the table to update.
     </p></dd>
<dt><span class="term"><i class="replaceable"><tt>column</tt></i></span></dt>
<dd><p>      The name of a column in <i class="replaceable"><tt>table</tt></i>.
      The column name can be qualified with a subfield name or array
      subscript, if needed.
     </p></dd>
<dt><span class="term"><i class="replaceable"><tt>expression</tt></i></span></dt>
<dd><p>      An expression to assign to the column.  The expression may use the
      old values of this and other columns in the table.
     </p></dd>
<dt><span class="term"><tt class="literal">DEFAULT</tt></span></dt>
<dd><p>      Set the column to its default value (which will be NULL if no
      specific default expression has been assigned to it).
     </p></dd>
<dt><span class="term"><i class="replaceable"><tt>fromlist</tt></i></span></dt>
<dd><p>      A list of table expressions, allowing columns from other tables
      to appear in the <tt class="literal">WHERE</tt> condition and the update
      expressions. This is similar to the list of tables that can be
      specified in the <a href="sql-select.html#sql-from"><tt class="literal">FROM</tt> Clause</a> of a <tt class="command">SELECT</tt>
      statement; for example, an alias for the table name can be
      specified.
     </p></dd>
<dt><span class="term"><i class="replaceable"><tt>condition</tt></i></span></dt>
<dd><p>      An expression that returns a value of type <tt class="type">boolean</tt>.
      Only rows for which this expression returns <tt class="literal">true</tt>
      will be updated.
     </p></dd>
</dl></div>
</div>
<div class="refsect1" lang="en">
<a name="id2697418"></a><h2>Outputs</h2>
<p>   On successful completion, an <tt class="command">UPDATE</tt> command returns a command
   tag of the form
</p>
<pre class="screen">UPDATE <i class="replaceable"><tt>count</tt></i></pre>
<p>
   The <i class="replaceable"><tt>count</tt></i> is the number
   of rows updated.  If <i class="replaceable"><tt>count</tt></i> is
   0, no rows matched the <i class="replaceable"><tt>condition</tt></i> (this is not considered
   an error).
  </p>
</div>
<div class="refsect1" lang="en">
<a name="id2697461"></a><h2>Examples</h2>
<p>   Change the word <tt class="literal">Drama</tt> to <tt class="literal">Dramatic</tt> in the
   column <tt class="structfield">kind</tt> of the table <tt class="structname">films</tt>:

</p>
<pre class="programlisting">UPDATE films SET kind = 'Dramatic' WHERE kind = 'Drama';</pre>
<p>
  </p>
<p>   Adjust temperature entries and reset precipitation to its default
   value in one row of the table <tt class="structname">weather</tt>:

</p>
<pre class="programlisting">UPDATE weather SET temp_lo = temp_lo+1, temp_hi = temp_lo+15, prcp = DEFAULT
  WHERE city = 'San Francisco' AND date = '2003-07-03';</pre>
<p>
  </p>
<p>   Increment the sales count of the salesperson who manages the
   account for Acme Corporation, using the <tt class="literal">FROM</tt>
   clause syntax:
</p>
<pre class="programlisting">UPDATE employees SET sales_count = sales_count + 1 FROM accounts
  WHERE accounts.name = 'Acme Corporation'
  AND employees.id = accounts.sales_person;</pre>
<p>

   Perform the same operation, using a sub-select in the
   <tt class="literal">WHERE</tt> clause:
</p>
<pre class="programlisting">UPDATE employees SET sales_count = sales_count + 1 WHERE id =
  (SELECT sales_person FROM accounts WHERE name = 'Acme Corporation');</pre>
<p>

   Attempt to insert a new stock item along with the quantity of stock. If
   the item exists, update the stock count of the existing item. To do this,
   use savepoints.
</p>
<pre class="programlisting">BEGIN;
SAVEPOINT sp1;
INSERT INTO wines VALUES('Chateau Lafite 2003', '24');
-- Check for unique violation on name
ROLLBACK TO sp1;
UPDATE wines SET stock = stock + 24 WHERE winename='Chateau Lafite 2003';
COMMIT;</pre>
<p>
  </p>
</div>
<div class="refsect1" lang="en">
<a name="id2697554"></a><h2>Compatibility</h2>
<p>   This command conforms to the <span class="acronym">SQL</span> standard.  The
   <tt class="literal">FROM</tt> clause is a
   <span class="productname">PostgreSQL</span> extension.
  </p>
</div>
</div></body>
</html>
