<HTML
><HEAD
><TITLE
>Issuing a Query and Processing the Result</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.73
"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 7.3.3 Documentation"
HREF="index.html"><LINK
REL="UP"
TITLE="JDBC Interface"
HREF="jdbc.html"><LINK
REL="PREVIOUS"
TITLE="Using the Driver"
HREF="jdbc-use.html"><LINK
REL="NEXT"
TITLE="Performing Updates"
HREF="jdbc-update.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
NAME="creation"
CONTENT="2003-05-24T21:33:34"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PostgreSQL 7.3.3 Documentation</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="jdbc-use.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 5. <SPAN
CLASS="ACRONYM"
>JDBC</SPAN
> Interface</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="jdbc-update.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="JDBC-QUERY"
>5.3. Issuing a Query and Processing the Result</A
></H1
><P
>    Any time you want to issue <SPAN
CLASS="ACRONYM"
>SQL</SPAN
> statements to
    the database, you require a <TT
CLASS="CLASSNAME"
>Statement</TT
> or 
    <TT
CLASS="CLASSNAME"
>PreparedStatement</TT
> instance. Once you have 
    a <TT
CLASS="CLASSNAME"
>Statement</TT
> or 
    <TT
CLASS="CLASSNAME"
>PreparedStatement</TT
>, you can use issue a
    query. This will return a <TT
CLASS="CLASSNAME"
>ResultSet</TT
>
    instance, which contains the entire result.  <A
HREF="jdbc-query.html#JDBC-QUERY-EXAMPLE"
>Example 5-1</A
> illustrates this process.
   </P
><DIV
CLASS="EXAMPLE"
><A
NAME="JDBC-QUERY-EXAMPLE"
></A
><P
><B
>Example 5-1. Processing a Simple Query in <SPAN
CLASS="ACRONYM"
>JDBC</SPAN
></B
></P
><P
>     This example will issue a simple query and print out the first
     column of each row using a <TT
CLASS="CLASSNAME"
>Statement</TT
>.
</P><PRE
CLASS="PROGRAMLISTING"
>Statement st = db.createStatement();
ResultSet rs = st.executeQuery("SELECT * FROM mytable where columnfoo = 500");
while(rs.next()) {
    System.out.print("Column 1 returned ");
    System.out.println(rs.getString(1));
}
rs.close();
st.close();</PRE
><P>
    </P
><P
>     This example will issue the same query as before using 
     a <TT
CLASS="CLASSNAME"
>PreparedStatement</TT
>
     and a bind value in the query.
</P><PRE
CLASS="PROGRAMLISTING"
>int foovalue = 500;
PreparedStatement st = db.prepareStatement("SELECT * FROM mytable where columnfoo = ?");
st.setInt(1, foovalue);
ResultSet rs = st.executeQuery();
while(rs.next()) {
    System.out.print("Column 1 returned ");
    System.out.println(rs.getString(1));
}
rs.close();
st.close();</PRE
><P>
    </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN28202"
>5.3.1. Using the <TT
CLASS="CLASSNAME"
>Statement</TT
> or <TT
CLASS="CLASSNAME"
>    PreparedStatement</TT
> Interface</A
></H2
><P
>     The following must be considered when using the
     <TT
CLASS="CLASSNAME"
>Statement</TT
> or 
     <TT
CLASS="CLASSNAME"
>PreparedStatement</TT
> interface:

     <P
></P
></P><UL
><LI
><P
>        You can use a single <TT
CLASS="CLASSNAME"
>Statement</TT
> instance
        as many times as you want. You could create one as soon as you
        open the connection and use it for the connection's
        lifetime. But you have to remember that only one
        <TT
CLASS="CLASSNAME"
>ResultSet</TT
> can exist per
        <TT
CLASS="CLASSNAME"
>Statement</TT
> or 
        <TT
CLASS="CLASSNAME"
>PreparedStatement</TT
> at a given time.
       </P
></LI
><LI
><P
>        If you need to perform a query while processing a
        <TT
CLASS="CLASSNAME"
>ResultSet</TT
>, you can simply create and
        use another <TT
CLASS="CLASSNAME"
>Statement</TT
>.
       </P
></LI
><LI
><P
>        If you are using threads, and several are using the database,
        you must use a separate <TT
CLASS="CLASSNAME"
>Statement</TT
> for
        each thread. Refer to <A
HREF="jdbc-thread.html"
>Section 5.8</A
> if you are
        thinking of using threads, as it covers some important points.
       </P
></LI
><LI
><P
>        When you are done using the <TT
CLASS="CLASSNAME"
>Statement</TT
>
        or <TT
CLASS="CLASSNAME"
>PreparedStatement</TT
>
        you should close it.
       </P
></LI
></UL
><P>
    </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN28228"
>5.3.2. Using the <TT
CLASS="CLASSNAME"
>ResultSet</TT
> Interface</A
></H2
><P
>     The following must be considered when using the
     <TT
CLASS="CLASSNAME"
>ResultSet</TT
> interface:

     <P
></P
></P><UL
><LI
><P
>        Before reading any values, you must call
        <TT
CLASS="FUNCTION"
>next()</TT
>. This returns true if there is a
        result, but more importantly, it prepares the row for
        processing.
       </P
></LI
><LI
><P
>        Under the <SPAN
CLASS="ACRONYM"
>JDBC</SPAN
> specification, you should
        access a field only once. It is safest to stick to this rule,
        although at the current time, the
        <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> driver will allow you to
        access a field as many times as you want.
       </P
></LI
><LI
><P
>        You must close a <TT
CLASS="CLASSNAME"
>ResultSet</TT
> by calling
        <TT
CLASS="FUNCTION"
>close()</TT
> once you have finished using it.
       </P
></LI
><LI
><P
>        Once you make another query with the
        <TT
CLASS="CLASSNAME"
>Statement</TT
> used to create a
        <TT
CLASS="CLASSNAME"
>ResultSet</TT
>, the currently open
        <TT
CLASS="CLASSNAME"
>ResultSet</TT
> instance is closed
        automatically.
       </P
></LI
><LI
><P
>        <TT
CLASS="CLASSNAME"
>ResultSet</TT
> is currently read only.
        You can not update data through the <TT
CLASS="CLASSNAME"
>ResultSet</TT
>.
        If you want to update data you need to do it the old fashioned way
        by issuing a <SPAN
CLASS="ACRONYM"
>SQL</SPAN
> update statement.  This is 
        in conformance with the <SPAN
CLASS="ACRONYM"
>JDBC</SPAN
> specification 
        which does not require drivers to provide this functionality.
       </P
></LI
></UL
><P>
    </P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="jdbc-use.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="jdbc-update.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Using the Driver</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="jdbc.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Performing Updates</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>