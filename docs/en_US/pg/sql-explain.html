<HTML
><HEAD
><TITLE
>EXPLAIN</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.73
"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 7.3.3 Documentation"
HREF="index.html"><LINK
REL="UP"
TITLE="SQL Commands"
HREF="sql-commands.html"><LINK
REL="PREVIOUS"
TITLE="EXECUTE"
HREF="sql-execute.html"><LINK
REL="NEXT"
TITLE="FETCH"
HREF="sql-fetch.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
NAME="creation"
CONTENT="2003-05-24T21:33:34"></HEAD
><BODY
CLASS="REFENTRY"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PostgreSQL 7.3.3 Documentation</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="sql-execute.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="sql-fetch.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="SQL-EXPLAIN"
>EXPLAIN</A
></H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN43703"
></A
><H2
>Name</H2
>   EXPLAIN
  &nbsp;--&nbsp;   show the execution plan of a statement
  </DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="AEN43706"
></A
><H2
>Synopsis</H2
><PRE
CLASS="SYNOPSIS"
>EXPLAIN [ ANALYZE ] [ VERBOSE ] <TT
CLASS="REPLACEABLE"
><I
>query</I
></TT
>        
  </PRE
><DIV
CLASS="REFSECT2"
><A
NAME="R2-SQL-EXPLAIN-1"
></A
><H3
>    Inputs
   </H3
><P
>&#13;    <P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
>ANALYZE</DT
><DD
><P
>	Flag to carry out the query and show actual run times.
       </P
></DD
><DT
>VERBOSE</DT
><DD
><P
>	Flag to show detailed query plan dump.
       </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>query</I
></TT
></DT
><DD
><P
>	Any <TT
CLASS="REPLACEABLE"
><I
>query</I
></TT
>.
       </P
></DD
></DL
></DIV
><P>
   </P
></DIV
><DIV
CLASS="REFSECT2"
><A
NAME="R2-SQL-EXPLAIN-2"
></A
><H3
>    Outputs
   </H3
><P
>&#13;    <P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Query plan</DT
><DD
><P
>	Explicit query plan from the <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>
	planner.
       </P
></DD
></DL
></DIV
><P>
   </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Note: </B
>     Prior to <SPAN
CLASS="APPLICATION"
>PostgreSQL</SPAN
> 7.3, the query plan
     was emitted in the form of a NOTICE message.  Now it appears as a
     query result (formatted like a table with a single text column).
    </P
></BLOCKQUOTE
></DIV
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="R1-SQL-EXPLAIN-1"
></A
><H2
>   Description
  </H2
><P
>   This command displays the execution plan that the
   <SPAN
CLASS="APPLICATION"
>PostgreSQL</SPAN
> planner
   generates for the supplied query.  The execution plan shows how
   the table(s) referenced by the query will be scanned---by plain
   sequential scan, index scan, etc.---and if multiple tables are
   referenced, what join algorithms will be used to bring together
   the required tuples from each input table.
  </P
><P
>   The most critical part of the display is the estimated query execution
   cost, which is the planner's guess at how long it will take to run the
   query (measured in units of disk page fetches).  Actually two numbers
   are shown: the start-up time before the first tuple can be returned, and
   the total time to return all the tuples.  For most queries the total time
   is what matters, but in contexts such as an EXISTS sub-query the planner
   will choose the smallest start-up time instead of the smallest total time
   (since the executor will stop after getting one tuple, anyway).
   Also, if you limit the number of tuples to return with a LIMIT clause,
   the planner makes an appropriate interpolation between the endpoint
   costs to estimate which plan is really the cheapest.
  </P
><P
>   The ANALYZE option causes the query to be actually executed, not only
   planned.  The total elapsed time expended within each plan node (in
   milliseconds) and total number of rows it actually returned are added to
   the display.  This is useful for seeing whether the planner's estimates
   are close to reality.
  </P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
BORDER="1"
WIDTH="100%"
><TR
><TD
ALIGN="CENTER"
><B
>Caution</B
></TD
></TR
><TR
><TD
ALIGN="LEFT"
><P
>    Keep in mind that the query is actually executed when ANALYZE is used.
    Although <TT
CLASS="COMMAND"
>EXPLAIN</TT
> will discard any output that a SELECT
    would return,
    other side-effects of the query will happen as usual.
    If you wish to use <TT
CLASS="COMMAND"
>EXPLAIN ANALYZE</TT
> on an INSERT,
    UPDATE, or DELETE query without letting the query affect your data,
    use this approach:
      </P><PRE
CLASS="PROGRAMLISTING"
>BEGIN;
EXPLAIN ANALYZE ...;
ROLLBACK;
      </PRE
><P>
   </P
></TD
></TR
></TABLE
></DIV
><P
>   The VERBOSE option emits the full internal representation of the plan tree,
   rather than just a summary.
   Usually this option is only useful for debugging
   <SPAN
CLASS="APPLICATION"
>PostgreSQL</SPAN
>.   The VERBOSE dump is either
   pretty-printed or not, depending on the setting of the
   <TT
CLASS="OPTION"
>EXPLAIN_PRETTY_PRINT</TT
> configuration parameter.
  </P
><DIV
CLASS="REFSECT2"
><A
NAME="R2-SQL-EXPLAIN-3"
></A
><H3
>    Notes
   </H3
><P
>    There is only sparse documentation on the optimizer's use of cost
    information in <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>.
    Refer to the <I
CLASS="CITETITLE"
>User's Guide</I
> and
    <I
CLASS="CITETITLE"
>Programmer's Guide</I
> for more information.
   </P
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="R1-SQL-EXPLAIN-2"
></A
><H2
>   Usage
  </H2
><P
>   To show a query plan for a simple query on a table with a single
   <TT
CLASS="TYPE"
>int4</TT
> column and 10000 rows:

   </P><PRE
CLASS="PROGRAMLISTING"
>EXPLAIN SELECT * FROM foo;
    <TT
CLASS="COMPUTEROUTPUT"
>                       QUERY PLAN
---------------------------------------------------------
 Seq Scan on foo  (cost=0.00..155.00 rows=10000 width=4)
(1 row)
    </TT
>
   </PRE
><P>
  </P
><P
>   If there is an index and we use a query with an indexable WHERE condition,
   <TT
CLASS="COMMAND"
>EXPLAIN</TT
> will show a different plan:

   </P><PRE
CLASS="PROGRAMLISTING"
>EXPLAIN SELECT * FROM foo WHERE i = 4;
    <TT
CLASS="COMPUTEROUTPUT"
>                         QUERY PLAN
--------------------------------------------------------------
 Index Scan using fi on foo  (cost=0.00..5.98 rows=1 width=4)
   Index Cond: (i = 4)
(2 rows)
    </TT
>
   </PRE
><P>
  </P
><P
>   And here is an example of a query plan for a query
   using an aggregate function:

   </P><PRE
CLASS="PROGRAMLISTING"
>EXPLAIN SELECT sum(i) FROM foo WHERE i &lt; 10;
    <TT
CLASS="COMPUTEROUTPUT"
>                             QUERY PLAN
---------------------------------------------------------------------
 Aggregate  (cost=23.93..23.93 rows=1 width=4)
   -&gt;  Index Scan using fi on foo  (cost=0.00..23.92 rows=6 width=4)
         Index Cond: (i &lt; 10)
(3 rows)
    </TT
>
   </PRE
><P>
  </P
><P
>   Note that the specific numbers shown, and even the selected query
   strategy, may vary between <SPAN
CLASS="APPLICATION"
>PostgreSQL</SPAN
>
   releases due to planner improvements.
  </P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="R1-SQL-EXPLAIN-3"
></A
><H2
>   Compatibility
  </H2
><DIV
CLASS="REFSECT2"
><A
NAME="R2-SQL-EXPLAIN-4"
></A
><H3
>    SQL92
   </H3
><P
>    There is no <TT
CLASS="COMMAND"
>EXPLAIN</TT
> statement defined in SQL92.
   </P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="sql-execute.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="sql-fetch.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>EXECUTE</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="sql-commands.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>FETCH</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>