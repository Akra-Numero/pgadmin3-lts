<HTML
><HEAD
><TITLE
>The Fast-Path Interface</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.73
"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 7.3.3 Documentation"
HREF="index.html"><LINK
REL="UP"
TITLE="libpq - C Library"
HREF="libpq.html"><LINK
REL="PREVIOUS"
TITLE="Asynchronous Query Processing"
HREF="libpq-async.html"><LINK
REL="NEXT"
TITLE="Asynchronous Notification"
HREF="libpq-notify.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
NAME="creation"
CONTENT="2003-05-24T21:33:34"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PostgreSQL 7.3.3 Documentation</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="libpq-async.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 1. <SPAN
CLASS="APPLICATION"
>libpq</SPAN
> - C Library</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="libpq-notify.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="LIBPQ-FASTPATH"
>1.5. The Fast-Path Interface</A
></H1
><P
><SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> provides a fast-path interface to send
function calls to the backend.  This is a trapdoor into system internals and
can be a potential security hole.  Most users will not need this feature.

<P
></P
></P><UL
><LI
><P
><TT
CLASS="FUNCTION"
>PQfn</TT
>
	Request execution of a backend function via the fast-path interface.
</P><PRE
CLASS="SYNOPSIS"
>PGresult* PQfn(PGconn* conn,
               int fnid,
               int *result_buf,
               int *result_len,
               int result_is_int,
               const PQArgBlock *args,
               int nargs);</PRE
><P>
     The <TT
CLASS="PARAMETER"
><I
>fnid</I
></TT
> argument is the object identifier of the function to be
     executed.
     <TT
CLASS="PARAMETER"
><I
>result_buf</I
></TT
> is the buffer in which
     to place the return value.  The caller must  have  allocated
     sufficient space to store the return value (there is no check!).
     The actual result length will be returned in the integer pointed
     to  by  <TT
CLASS="PARAMETER"
><I
>result_len</I
></TT
>.   If a 4-byte integer result is expected, set
     <TT
CLASS="PARAMETER"
><I
>result_is_int</I
></TT
> to 1; otherwise set it to 0.  (Setting <TT
CLASS="PARAMETER"
><I
>result_is_int</I
></TT
> to 1
     tells <SPAN
CLASS="APPLICATION"
>libpq</SPAN
> to byte-swap the value if necessary, so that it is
     delivered as a proper int value for the client machine.  When
     <TT
CLASS="PARAMETER"
><I
>result_is_int</I
></TT
> is 0, the byte string sent by the backend is returned
     unmodified.)
     <TT
CLASS="PARAMETER"
><I
>args</I
></TT
> and <TT
CLASS="PARAMETER"
><I
>nargs</I
></TT
> specify the arguments to be passed to the function.
</P><PRE
CLASS="SYNOPSIS"
>typedef struct {
    int len;
    int isint;
    union {
        int *ptr;
        int integer;
    } u;
} PQArgBlock;</PRE
><P>
     <TT
CLASS="FUNCTION"
>PQfn</TT
> always returns a valid <TT
CLASS="STRUCTNAME"
>PGresult*</TT
>. The result status
     should be checked before the result is used.   The
     caller is responsible for  freeing  the  <TT
CLASS="STRUCTNAME"
>PGresult</TT
>  with
     <TT
CLASS="FUNCTION"
>PQclear</TT
> when it is no longer needed.</P
></LI
></UL
><P></P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="libpq-async.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="libpq-notify.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Asynchronous Query Processing</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="libpq.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Asynchronous Notification</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>