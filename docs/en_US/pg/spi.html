<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Chapter 39. Server Programming Interface</title>
<link rel="stylesheet" href="stylesheet.css" type="text/css">
<link rev="made" href="pgsql-docs@postgresql.org">
<meta name="generator" content="DocBook XSL Stylesheets V1.64.1">
<link rel="home" href="index.html" title="PostgreSQL 8.0.0beta5 Documentation">
<link rel="up" href="server-programming.html" title="Part V. Server Programming">
<link rel="previous" href="plpython-database.html" title="38.3. Database Access">
<link rel="next" href="spi-spi-connect.html" title="SPI_connect">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter" lang="en" id="spi">
<div class="titlepage">
<div><div><h2 class="title">
<a name="spi"></a>Chapter 39. Server Programming Interface</h2></div></div>
<div></div>
</div>
<div class="toc">
<p><b>Table of Contents</b></p>
<dl>
<dt><span class="sect1"><a href="spi.html#spi-interface">39.1. Interface Functions</a></span></dt>
<dt><span class="sect1"><a href="spi-interface-support.html">39.2. Interface Support Functions</a></span></dt>
<dt><span class="sect1"><a href="spi-memory.html">39.3. Memory Management</a></span></dt>
<dt><span class="sect1"><a href="spi-visibility.html">39.4. Visibility of Data Changes</a></span></dt>
<dt><span class="sect1"><a href="spi-examples.html">39.5. Examples</a></span></dt>
</dl>
</div>
<a name="id2654568"></a><p>  The <i class="firstterm">Server Programming Interface</i>
  (<span class="acronym">SPI</span>) gives writers of user-defined
  <span class="acronym">C</span> functions the ability to run
  <span class="acronym">SQL</span> commands inside their functions.
  <span class="acronym">SPI</span> is a set of
  interface functions to simplify access to the parser, planner,
  optimizer, and executor. <span class="acronym">SPI</span> also does some
  memory management.
 </p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Note</h3>
<p>   The available procedural languages provide various means to
   execute SQL commands from procedures.  Some of these are based on or
   modelled after SPI, so this documentation might be of use for users
   of those languages as well.
  </p>
</div>
<p>  To avoid misunderstanding we'll use the term &#8220;<span class="quote">function</span>&#8221;
  when we speak of <span class="acronym">SPI</span> interface functions and
  &#8220;<span class="quote">procedure</span>&#8221; for a user-defined C-function that is
  using <span class="acronym">SPI</span>.
 </p>
<p>  Note that if during the execution of a procedure the transaction is
  aborted because of an error in a command, then control will not be
  returned to your procedure.  Rather, all work will be rolled back
  and the server will wait for the next command from the client.  A
  related restriction is the inability to execute
  <tt class="command">BEGIN</tt>, <tt class="command">COMMIT</tt>, and
  <tt class="command">ROLLBACK</tt> (transaction control statements) inside
  a procedure.  Both of these restrictions will probably be changed in
  the future.
 </p>
<p>  <span class="acronym">SPI</span> functions return a nonnegative result on
  success (either via a returned integer value or in the global
  variable <tt class="varname">SPI_result</tt>, as described below).  On
  error, a negative result or <tt class="symbol">NULL</tt> will be returned.
 </p>
<p>  Source code files that use SPI must include the header file
  <tt class="filename">executor/spi.h</tt>.
 </p>
<div class="sect1" lang="en"><div class="titlepage">
<div><div><h2 class="title" style="clear: both">
<a name="spi-interface"></a>39.1. Interface Functions</h2></div></div>
<div></div>
</div></div>
</div></body>
</html>
