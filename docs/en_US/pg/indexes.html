<HTML
><HEAD
><TITLE
>Indexes</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.73
"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 7.3.3 Documentation"
HREF="index.html"><LINK
REL="UP"
TITLE="PostgreSQL 7.3.3 User's Guide"
HREF="user.html"><LINK
REL="PREVIOUS"
TITLE="UNION and CASE Constructs"
HREF="typeconv-union-case.html"><LINK
REL="NEXT"
TITLE="Index Types"
HREF="indexes-types.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
NAME="creation"
CONTENT="2003-05-24T21:33:34"></HEAD
><BODY
CLASS="CHAPTER"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PostgreSQL 7.3.3 Documentation</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="typeconv-union-case.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="indexes-types.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="CHAPTER"
><H1
><A
NAME="INDEXES"
>Chapter 8. Indexes</A
></H1
><DIV
CLASS="TOC"
><DL
><DT
><B
>Table of Contents</B
></DT
><DT
>8.1. <A
HREF="indexes.html#INDEXES-INTRO"
>Introduction</A
></DT
><DT
>8.2. <A
HREF="indexes-types.html"
>Index Types</A
></DT
><DT
>8.3. <A
HREF="indexes-multicolumn.html"
>Multicolumn Indexes</A
></DT
><DT
>8.4. <A
HREF="indexes-unique.html"
>Unique Indexes</A
></DT
><DT
>8.5. <A
HREF="indexes-functional.html"
>Functional Indexes</A
></DT
><DT
>8.6. <A
HREF="indexes-opclass.html"
>Operator Classes</A
></DT
><DT
>8.7. <A
HREF="indexes-partial.html"
>Partial Indexes</A
></DT
><DT
>8.8. <A
HREF="indexes-examine.html"
>Examining Index Usage</A
></DT
></DL
></DIV
><A
NAME="AEN11020"
></A
><P
>  Indexes are a common way to enhance database performance.  An index
  allows the database server to find and retrieve specific rows much
  faster than it could do without an index.  But indexes also add
  overhead to the database system as a whole, so they should be used
  sensibly.
 </P
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="INDEXES-INTRO"
>8.1. Introduction</A
></H1
><P
>   The classical example for the need of an index is if there is a
   table similar to this:
</P><PRE
CLASS="PROGRAMLISTING"
>CREATE TABLE test1 (
    id integer,
    content varchar
);</PRE
><P>
   and the application requires a lot of queries of the form
</P><PRE
CLASS="PROGRAMLISTING"
>SELECT content FROM test1 WHERE id = <TT
CLASS="REPLACEABLE"
><I
>constant</I
></TT
>;</PRE
><P>
   Ordinarily, the system would have to scan the entire
   <TT
CLASS="STRUCTNAME"
>test1</TT
> table row by row to find all
   matching entries.  If there are a lot of rows in
   <TT
CLASS="STRUCTNAME"
>test1</TT
> and only a few rows (possibly zero
   or one) returned by the query, then this is clearly an inefficient
   method.  If the system were instructed to maintain an index on the
   <TT
CLASS="STRUCTFIELD"
>id</TT
> column, then it could use a more
   efficient method for locating matching rows.  For instance, it
   might only have to walk a few levels deep into a search tree.
  </P
><P
>   A similar approach is used in most books of non-fiction:  Terms and
   concepts that are frequently looked up by readers are collected in
   an alphabetic index at the end of the book.  The interested reader
   can scan the index relatively quickly and flip to the appropriate
   page, and would not have to read the entire book to find the
   interesting location.  As it is the task of the author to
   anticipate the items that the readers are most likely to look up,
   it is the task of the database programmer to foresee which indexes
   would be of advantage.
  </P
><P
>   The following command would be used to create the index on the
   <TT
CLASS="STRUCTFIELD"
>id</TT
> column, as discussed:
</P><PRE
CLASS="PROGRAMLISTING"
>CREATE INDEX test1_id_index ON test1 (id);</PRE
><P>
   The name <TT
CLASS="STRUCTNAME"
>test1_id_index</TT
> can be chosen
   freely, but you should pick something that enables you to remember
   later what the index was for.
  </P
><P
>   To remove an index, use the <TT
CLASS="COMMAND"
>DROP INDEX</TT
> command.
   Indexes can be added to and removed from tables at any time.
  </P
><P
>   Once the index is created, no further intervention is required: the
   system will use the index when it thinks it would be more efficient
   than a sequential table scan.  But you may have to run the
   <TT
CLASS="COMMAND"
>ANALYZE</TT
> command regularly to update
   statistics to allow the query planner to make educated decisions.
   Also read <A
HREF="performance-tips.html"
>Chapter 10</A
> for information about
   how to find out whether an index is used and when and why the
   planner may choose to <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>not</I
></SPAN
> use an index.
  </P
><P
>   Indexes can benefit <TT
CLASS="COMMAND"
>UPDATE</TT
>s and
   <TT
CLASS="COMMAND"
>DELETE</TT
>s with search conditions.  Indexes can also be
   used in join queries.  Thus,
   an index defined on a column that is part of a join condition can
   significantly speed up queries with joins.
  </P
><P
>   When an index is created, the system has to keep it synchronized with the
   table.  This adds overhead to data manipulation operations.
   Therefore indexes that are non-essential or do not get used at all
   should be removed.  Note that a
   query or data manipulation command can use at most one index
   per table.
  </P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="typeconv-union-case.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="indexes-types.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><TT
CLASS="LITERAL"
>UNION</TT
> and <TT
CLASS="LITERAL"
>CASE</TT
> Constructs</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="user.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Index Types</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>